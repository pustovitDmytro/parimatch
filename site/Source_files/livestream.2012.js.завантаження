var streamcontainer='#streamcontainer';var streamcontent='streamcontent';$(document).ready(function(){BindVLink();$('span.div-closer').click(function(e){hidePlayer();$('#click1').removeClass('click1NarrowStream');$('#streamcontent').html('');$('#streamcaption span.evname').html('');}).tooltip();$('div#streamcaption span.drag-switcher').click(function(){$(streamcontainer).toggleClass('ui-draggable');if($(streamcontainer).hasClass('ui-draggable'))
{$(streamcontainer).draggable();$(streamcontainer).draggable('enable');$('#click1').removeClass('click1NarrowStream');}
else
{$(streamcontainer).draggable('disable');$('#click1').addClass('click1NarrowStream');$("html, body").animate({scrollTop:0},"slow");}}).tooltip();});function banDoubleClick(){var selector=$(".vlinkimg").add(".vlink").add(".vlinkbr");var event=$("#z_contentw").attr("data-idClickEvent");var el=$('div[eventid = '+ event+']:has(img)');selector.click(function(e){if($(this).hasClass("noVideo")){}else{var event=$(this).attr("eventid");$("#z_contentw").attr("data-idClickEvent",event);$(this).wrap("<div class='noVideo'></div>");selector.not(this).removeClass("noVideo");}});el.wrap("<div class='noVideo'></div>");$(".div-closer").click(function(){$(".noVideo").removeClass("noVideo");$("#z_contentw").attr("data-idClickEvent","");});}
function videolinkIsLogin(){if($(".header_reg").attr("href")){console.log("videolinkIsLoginOK");var vlinklink=$(".vlinklink");vlinklink.addClass("vlinklinkOF").removeClass("vlinklink");$(".vlinklinkOF").on("click",function(){var w=500;var h=500;var left=Number((screen.width/2)-(w/2));var tops=Number((screen.height/2)-(h/2));window.open("./video_unavailable.html",'','toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+tops+', left='+left);});}}
function BindVLink(){banDoubleClick();videolinkIsLogin();$('div.vlink').click(function(e){$(streamcontainer).attr('eventid',$(this).attr('eventid'));if(!$(streamcontainer).hasClass('ui-draggable')){$("html, body").animate({scrollTop:0},"slow");$('#click1').addClass('click1NarrowStream');if($.browser.msie)$('#isARDisabled').focus();}
console.log("BindVLink");showPlayerNew($(this).attr('eventId'),"BindVLink");}).tooltip({delay:500});$('div.vlinklink').click(function(e){showVLink($(this).attr('vlink'));}).tooltip({delay:500});$('div.vlinkscc').click(function(e){if(!$(streamcontainer).hasClass('ui-draggable')){$("html, body").animate({scrollTop:0},"slow");$('#click1').addClass('click1NarrowStream');if($.browser.msie)$('#isARDisabled').focus();}
showScc($(this).attr('eventId'),$(this).attr('team1Name'),$(this).attr('team2Name'),$(this).attr('locale'));}).tooltip({delay:500});$('div.vlinkbr').click(function(e){$(streamcontainer).attr('eventid',$(this).attr('eventid'));if(!$(streamcontainer).hasClass('ui-draggable')){$("html, body").animate({scrollTop:0},"slow");$('#click1').addClass('click1NarrowStream');if($.browser.msie)$('#isARDisabled').focus();}
console.log("br2")
showPlayerNew($(this).attr('eventId'),"br2");}).tooltip({delay:500});$('div.vlinkpf').click(function(e){$(streamcontainer).attr('eventid',$(this).attr('eventid'));if(!$(streamcontainer).hasClass('ui-draggable')){$("html, body").animate({scrollTop:0},"slow");$('#click1').addClass('click1NarrowStream');if($.browser.msie)$('#isARDisabled').focus();}
showPf($(this).attr('eventId'),$(this).attr('team1Name'),$(this).attr('team2Name'));}).tooltip({delay:500});$('div.vlinkimg').click(function(e){$(streamcontainer).attr('eventid',$(this).attr('eventid'));if(!$(streamcontainer).hasClass('ui-draggable')){$("html, body").animate({scrollTop:0},"slow");$('#click1').addClass('click1NarrowStream');if($.browser.msie)$('#isARDisabled').focus();}
console.log("img")
showPlayerNew($(this).attr('eventId'),'img');}).tooltip({delay:500});}
function RefreshStream(){eventId=$(streamcontainer).attr('eventid');url='stream_url.html?eventid='+ eventId;$.get(url,function(data,textStatus){try{var r=eval('('+ data+')');}catch(e){;};if(typeof(r)=="object"){$('#streamcaption span.evname').text(r.evName);if(r.errCode==0){var v=document.getElementById("sv_player");v.SetNewStream(r.link);}else{$('#'+streamcontent).html('<p>'+ r.errMessage+'</p>');}};})}
function showPlayer(){var so=new SWFObject("../static/img/swf/flashplayer.swf","sv_player","490","367","9.0.0","#000000");so.addParam("quality","high");so.addParam("menu","false");so.addParam("wmode","transparent");so.write(streamcontent);$(streamcontainer).show();$(streamcontainer).addClass('enabled');RefreshStream();}
function showPlayerNew(eventId){$('#streamcontent').html('');$(streamcontainer).show();$(streamcontainer).addClass('enabled');if(arguments[1]){var $_GET_hl=getParameterByName("hl");var url='https://pmsport.online/embed/?li='+ $_GET_hl;console.log(url+" "+ arguments[1]);var title=$(".row1 td.l").html().split("<br>");var team1=(title[0].length>20)?title[0].replace(/<[^>]+>/g,'').substr(0,20)+"...":title[0];var team2=(title[1].length>20)?title[1].replace(/<[^>]+>/g,'').substr(0,20)+"...":title[1];var evName=team1+" - "+ team2;}else{var eventId=$(streamcontainer).attr('eventid');var url='https://pmsport.online/embed/?eventid='+ eventId;urlGet='/stream_url.html?eventid='+ eventId;$.get(urlGet,function(data){var evName=JSON.parse(data).evName;$("#streamcaption .evname").text(evName);});}
$("#streamcaption .evname").text(evName);$("#streamcontent").html('<iframe src = "'+ url+'" style = "width: 100%; height:100%; "></iframe>');}
function hidePlayer(){var v=document.getElementById("sv_player");try{if(v)v.videostop();}catch(e){;};$(streamcontainer).hide();$(streamcontainer).removeClass('enabled');}
function showVLink(url){sw=screen.availWidth;sh=screen.availHeight;if(url.indexOf('youtube')>0){ww=800;wh=600;}else{ww=1024;wh=768;}
ww=Math.min(ww,sw);wh=Math.min(wh,sh);posx=(sw-ww)/2; posy=(sh-wh-50)/2;dimenStr='width='+ww+',height='+wh;posStr='left='+posx+',top='+posy;toolStr='location=0,menubar=0,toolbar=0,status=0,scrollbars=1,resizable=1';w=open(url,'vlink',toolStr+','+dimenStr+','+posStr);if(w)w.focus();return false;}
function showScc(eventId,team1Name,team2Name,locale){uDomain=window.location.protocol+'//';uDomain+=window.location.host;Domain='http://parimatch.betstream.betgenius.com';Domain=window.location.protocol+'//'+ Domain.split('//')[1];$('#streamcaption span.evname').text(team1Name+' - '+ team2Name);$(streamcontainer).show();$(streamcontainer).addClass('enabled');$('#streamcontent').html('<div id=scc></div>')
scorecentre.iframe.api.create(document.getElementById('scc'),490,367,Domain,eventId,team1Name,team2Name,'',locale,'','',uDomain,'','');}
function showBR(eventId,team1Name,team2Name){if($('#streamcontent').find('p').size()==1){$('#streamcontent').find('p').html('');flowplayer("streamcontent","../static/img/swf/flowplayer-3.2.18.swf");}
$(streamcontainer).show();$(streamcontainer).addClass('enabled');eventId=$(streamcontainer).attr('eventid');url='stream_url.html?eventid='+ eventId;$.get(url,function(data,textStatus){try{var r=eval('('+ data+')');}catch(e){;};if(typeof(r)=="object"){$('#streamcaption span.evname').text(r.evName);if(r.errCode==0){flowplayer("streamcontent","../static/img/swf/flowplayer-3.2.18.swf",{onLoad:function(){alert('load');},clip:{url:r.name,live:true,provider:'influxis'},plugins:{influxis:{url:"flowplayer.rtmp-3.2.13.swf",netConnectionUrl:r.uri},controls:{fullscreen:false}}});}else{$('#'+streamcontent).html('<p>'+ r.errMessage+'</p>');}};})}
function showBRv2(eventId,team1Name,team2Name){if($('#streamcontent').find('p').size()==1){$('#streamcontent').find('p').html('');flowplayer("streamcontent","../static/img/swf/flowplayer-3.2.18.swf");}
$(streamcontainer).show();$(streamcontainer).addClass('enabled');eventId=$(streamcontainer).attr('eventid');url='stream_url.html?eventid='+ eventId+'&v=BR2';$.get(url,function(data,textStatus){try{var r=eval('('+ data+')');}catch(e){;};if(typeof(r)=="object"){$('#streamcaption span.evname').text(r.evName);if(r.errCode==0){flowplayer("streamcontent","../static/img/swf/flowplayer-3.2.18.swf",{clip:{url:r.name,live:true,provider:'rtmp',autoPlay:true,bufferLength:2},plugins:{rtmp:{url:"flowplayer.rtmp-3.2.13.swf",netConnectionUrl:encodeURIComponent(r.uri),subscribe:true},controls:{fullscreen:false,play:false,stop:false}}});}else{$('#'+streamcontent).html('<p>'+ r.errMessage+'</p>');}};})}
function showPf(eventId,team1Name,team2Name){$('#streamcontent').html('');$(streamcontainer).show();$(streamcontainer).addClass('enabled');eventId=$(streamcontainer).attr('eventid');url='stream_url.html?eventid='+ eventId;$.get(url,function(data,textStatus){try{var r=eval('('+ data+')');}catch(e){;};if(typeof(r)=="object"){$('#streamcaption span.evname').text(r.evName);if(r.errCode==0){if(window.location.protocol=='https:'){r.ifurl=window.location.protocol+'//'+ r.ifurl.split('//')[1];r.ifurl=r.ifurl.replace('www','secure');}
r.ifurl+='&width=490';r.ifurl+='&height=367';r.ifurl+='&homeTeam='+r.homeTeam;r.ifurl+='&awayTeam='+r.awayTeam;r.ifurl+='&Lang='+r.Lang;$('#streamcontent').html('<iframe></iframe>').find('iframe').attr('src',r.ifurl);}else{$('#'+streamcontent).html('<p>'+ r.errMessage+'</p>');}};})}
function showIMG(eventId,team1Name,team2Name){$('#streamcontent').html('');$(streamcontainer).show();$(streamcontainer).addClass('enabled');eventId=$(streamcontainer).attr('eventid');url='stream_url.html?eventid='+ eventId;$.get(url,function(data,textStatus){try{var r=eval('('+ data+')');}catch(e){;};if(typeof(r)=="object"){$('#streamcaption span.evname').text(r.evName);if(r.errCode==0){r.ifurl=window.location.protocol+'//'+ r.ifurl.split('//')[1];$('#streamcontent').html('<iframe></iframe>').find('iframe').attr('src',r.ifurl).attr('style',"border:none;padding-top:40px;margin:0;height:100%;width:100%;");}else{$('#'+streamcontent).html('<p>'+ r.errMessage+'</p>');}};})}